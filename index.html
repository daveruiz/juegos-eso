<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juegos React sin build</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                DEFAULT: "#38bdf8",
                dark: "#0ea5e9",
              },
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "-apple-system", "sans-serif"],
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  </head>
  <body class="min-h-screen bg-slate-950 bg-gradient-to-b from-slate-950 to-slate-900 font-sans text-slate-100">
    <header class="mx-auto max-w-3xl px-4 pb-6 pt-10 text-center">
      <h1 class="text-3xl font-semibold tracking-tight sm:text-4xl">
        Juegos React sin build
      </h1>
      <p class="mt-3 text-lg leading-relaxed text-slate-300/80">
        Esta colección incluye minijuegos escritos con React y servidos sin
        dependencias de compilación. Abre cualquier juego para jugarlo al
        instante.
      </p>
    </header>

    <main
      id="app"
      class="mx-auto grid max-w-5xl gap-6 px-4 pb-16 sm:grid-cols-2 lg:grid-cols-3"
    ></main>

    <template id="game-card-template">
      <article
        class="group flex h-full flex-col justify-between gap-4 rounded-2xl border border-white/5 bg-white/5 p-6 backdrop-blur-lg transition-all duration-150 hover:-translate-y-1 hover:border-brand/50 hover:bg-slate-900/70 hover:shadow-2xl"
      >
        <div class="space-y-2">
          <h2 class="text-xl font-semibold text-white"></h2>
          <p class="text-sm leading-relaxed text-slate-300/80"></p>
        </div>
        <a
          class="inline-flex w-max items-center gap-2 rounded-full bg-brand px-5 py-2 text-sm font-semibold text-slate-950 transition hover:bg-brand-dark"
          target="_blank"
          rel="noopener"
        ></a>
      </article>
    </template>

    <script>
      const rootElement = document.getElementById("app");
      const cardTemplate = document.getElementById("game-card-template");

      function GameCard({ title, description, url }) {
        const clone = cardTemplate.content.cloneNode(true);
        clone.querySelector("h2").textContent = title;
        clone.querySelector("p").textContent = description;
        const link = clone.querySelector("a");
        link.textContent = "Abrir juego";
        link.href = url;
        return clone;
      }

      function renderGames(games) {
        rootElement.innerHTML = "";
        if (!games.length) {
          const empty = document.createElement("p");
          empty.className =
            "col-span-full rounded-2xl border border-dashed border-white/20 bg-white/5 px-6 py-10 text-center text-base text-slate-300/80";
          empty.textContent =
            "Añade tu primer juego editando el archivo games/games.json.";
          rootElement.appendChild(empty);
          return;
        }

        const fragment = document.createDocumentFragment();
        games.forEach((game) => {
          fragment.appendChild(
            GameCard({
              title: game.name,
              description: game.description,
              url: game.path,
            })
          );
        });
        rootElement.appendChild(fragment);
      }

      fetch("./games/games.json")
        .then((response) => {
          if (!response.ok) {
            throw new Error("No se pudo cargar la lista de juegos");
          }
          return response.json();
        })
        .then((data) => {
          renderGames(data.games || []);
        })
        .catch((error) => {
          console.error(error);
          renderGames([]);
        });
    </script>
  </body>
</html>
